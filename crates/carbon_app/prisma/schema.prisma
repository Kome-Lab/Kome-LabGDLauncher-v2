datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

generator client {
  provider = "cargo prisma"
  output   = "../src/db.rs"
}

model AppConfiguration {
  id                   Int     @id @default(0)
  theme                String  @default("main")
  reducedMotion        Boolean @default(false)
  discordIntegration   Boolean @default(true)
  releaseChannel       String  @default("stable")
  activeAccountUuid    String?
  defaultInstanceGroup Int?
}

model Account {
  uuid           String    @id
  username       String
  accessToken    String?
  tokenExpires   DateTime?
  msRefreshToken String?
}

model MinecraftManifest {
  id          String @unique
  type        String
  url         String
  time        String
  releaseTime String
  sha1        String @unique
}

model MinecraftVersion {
  id   String @unique
  json Bytes
}

model MinecraftAssets {
  assetsIdSha1 String @unique
  json         Bytes
}

model ActiveDownloads {
  url     String @id
  file_id String @unique
}

model Instance {
  name      String
  shortpath String         @id
  index     Int
  group     InstanceGroup  @relation(fields: [groupId], references: [id])
  groupId   Int
}

// WARNING: this table is accessed with raw sql. Check InstanceManager::move_group before modifying.
model InstanceGroup {
  id         Int        @id @default(autoincrement())
  name       String
  groupIndex Int        //@unique
  instances  Instance[]
}
